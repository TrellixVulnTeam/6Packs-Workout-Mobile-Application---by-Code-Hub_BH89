{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"../services/data.service\";\nimport * as i5 from \"../services/user.service\";\nimport * as i6 from \"@angular/common\";\n\nfunction LoginPage_div_10_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"small\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const error_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(error_r2.message);\n  }\n}\n\nfunction LoginPage_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginPage_div_10_ng_container_1_Template, 3, 1, \"ng-container\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const error_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.username.hasError(error_r2.type) && (ctx_r0.username.dirty || ctx_r0.username.touched));\n  }\n}\n\nfunction LoginPage_div_16_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"small\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const error_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(error_r5.message);\n  }\n}\n\nfunction LoginPage_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginPage_div_16_ng_container_1_Template, 3, 1, \"ng-container\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const error_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.password.hasError(error_r5.type) && (ctx_r1.password.dirty || ctx_r1.password.touched));\n  }\n}\n\nexport let LoginPage = /*#__PURE__*/(() => {\n  class LoginPage {\n    constructor(fb, router, toastController, dataService, userService) {\n      this.fb = fb;\n      this.router = router;\n      this.toastController = toastController;\n      this.dataService = dataService;\n      this.userService = userService;\n      this.errormsgs = {\n        username: [{\n          type: 'required',\n          message: 'Enter your username.'\n        }],\n        password: [{\n          type: 'required',\n          message: 'Enter your password.'\n        }, {\n          type: 'pattern',\n          message: 'Password is incorrect.'\n        }]\n      };\n    }\n\n    get username() {\n      return this.loginForm.get('username');\n    }\n\n    get password() {\n      return this.loginForm.get('password');\n    }\n\n    ngOnInit() {\n      this.loginForm = this.fb.group({\n        username: ['', [Validators.required]],\n        password: ['', [Validators.required]]\n      });\n    }\n\n    ionViewDidEnter() {\n      if (this.userService.isLoggedIn()) {\n        // eslint-disable-next-line no-underscore-dangle\n        this.router.navigate(['tabs']);\n      }\n    }\n\n    presentToast(message) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message,\n          duration: 2000\n        });\n        toast.present();\n      });\n    }\n\n    forgotpass() {\n      Swal.fire({\n        icon: 'error',\n        title: 'Feature Unavailable',\n        text: 'This feature will be coming soon. Thank you for understanding.' + 'Keep your password always in your mind to avoid forgotten password.',\n        confirmButtonText: 'I understand'\n      });\n    }\n\n    onSubmit($event) {\n      this.dataService.request('login', this.loginForm.value).subscribe(res => {\n        if (res.data) {\n          Swal.fire({\n            position: 'center',\n            icon: 'success',\n            title: 'SIGNED IN',\n            html: 'Welcome to 6Packs ' + this.name + '. Stay FIT and HEALTHY!',\n            showConfirmButton: false,\n            timer: 1700\n          });\n          this.userService.setUser(res.data);\n          this.loginForm.reset();\n          this.userService.setLoggedIn(); // eslint-disable-next-line no-underscore-dangle\n\n          this.router.navigate(['/tabs']);\n        } else if (res.error) {\n          Swal.fire({\n            position: 'center',\n            icon: 'error',\n            title: 'Unable to Sign In',\n            text: 'Incorrect username or password. Please try again.',\n            showConfirmButton: false,\n            timer: 1800\n          });\n        }\n      });\n    }\n\n  }\n\n  LoginPage.ɵfac = function LoginPage_Factory(t) {\n    return new (t || LoginPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i4.DataService), i0.ɵɵdirectiveInject(i5.UserService));\n  };\n\n  LoginPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginPage,\n    selectors: [[\"app-login\"]],\n    decls: 30,\n    vars: 5,\n    consts: [[\"src\", \"/assets/app-icon/6packs-icon.png\"], [1, \"ion-text-center\", \"create\"], [\"ngNativeValidate\", \"\", 3, \"formGroup\", \"submit\"], [\"position\", \"floating\"], [\"inputmode\", \"text\", \"formControlName\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"password\", \"formControlName\", \"password\"], [1, \"forgot-link\"], [3, \"click\"], [\"type\", \"submit\", \"expand\", \"block\", \"mode\", \"ios\", 3, \"disabled\"], [1, \"create-link\"], [\"href\", \"/signup\"], [4, \"ngIf\"], [1, \"error-message\"]],\n    template: function LoginPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\");\n        i0.ɵɵelement(1, \"img\", 0);\n        i0.ɵɵelementStart(2, \"h1\", 1);\n        i0.ɵɵtext(3, \"Sign In\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 2);\n        i0.ɵɵlistener(\"submit\", function LoginPage_Template_form_submit_4_listener($event) {\n          return ctx.onSubmit($event);\n        });\n        i0.ɵɵelementStart(5, \"ion-list\");\n        i0.ɵɵelementStart(6, \"ion-item\");\n        i0.ɵɵelementStart(7, \"ion-label\", 3);\n        i0.ɵɵtext(8, \"Username\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_9_listener($event) {\n          return ctx.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, LoginPage_div_10_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelement(11, \"br\");\n        i0.ɵɵelementStart(12, \"ion-item\");\n        i0.ɵɵelementStart(13, \"ion-label\", 3);\n        i0.ɵɵtext(14, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"ion-input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, LoginPage_div_16_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementStart(17, \"ion-label\", 7);\n        i0.ɵɵelementStart(18, \"a\", 8);\n        i0.ɵɵlistener(\"click\", function LoginPage_Template_a_click_18_listener() {\n          return ctx.forgotpass();\n        });\n        i0.ɵɵtext(19, \"Forgot password?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"br\");\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelement(22, \"br\");\n        i0.ɵɵelementStart(23, \"ion-button\", 9);\n        i0.ɵɵtext(24, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ion-label\", 10);\n        i0.ɵɵtext(27, \"Don't have any account? \");\n        i0.ɵɵelementStart(28, \"a\", 11);\n        i0.ɵɵtext(29, \"Create here.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.errormsgs.username);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.errormsgs.password);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"disabled\", !ctx.loginForm.valid);\n      }\n    },\n    directives: [i3.IonContent, i1.NgControlStatusGroup, i1.FormGroupDirective, i3.IonList, i3.IonItem, i3.IonLabel, i3.IonInput, i3.TextValueAccessor, i1.NgControlStatus, i1.FormControlName, i6.NgForOf, i3.IonButton, i6.NgIf],\n    styles: [\"ion-content[_ngcontent-%COMP%]{--ion-background-color:#f8f8f8}img[_ngcontent-%COMP%]{width:180px;height:180px;display:flex;margin:auto}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-left:15px;font-size:14px}.create[_ngcontent-%COMP%]{font-weight:500;padding-top:5px;position:relative;--ion-font-family:\\\"barlow-font-regular\\\"}ion-label[_ngcontent-%COMP%]{font-size:14px}ion-input[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{color:#696868!important}ion-input[_ngcontent-%COMP%]{font-size:16px}ion-list[_ngcontent-%COMP%]{background-color:#f8f8f8;width:250px}ion-item[_ngcontent-%COMP%]{--background:#ececec;border-radius:5px}form[_ngcontent-%COMP%]{--ion-font-family:\\\"barlow-font-lighter\\\";justify-content:center;align-items:center;display:flex;height:45%}.forgot-link[_ngcontent-%COMP%]{font-size:14px;position:relative;float:right;padding:8px}ion-button[_ngcontent-%COMP%]{font-size:18px;--background:#f6bc77}.create-link[_ngcontent-%COMP%]{font-size:15px;text-align:center;position:absolute;bottom:60px}a[_ngcontent-%COMP%]{color:#f6bc77;text-decoration:none}\"]\n  });\n  return LoginPage;\n})();","map":null,"metadata":{},"sourceType":"module"}